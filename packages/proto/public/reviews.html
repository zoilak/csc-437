<!DOCTYPE html>
<html>
<head>
  <title>TrackBoxd - Album Review</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <h1 id="album-title"></h1>
  <img id="album-cover" src="" alt="Album Cover" width="300" height="300">

  <h2>Reviews</h2>
  <ul id="review-list">
    <!-- Reviews will go here -->
  </ul>

  <h3>Add a Review</h3>
  <form id="review-form">
    <label for="review-text">Your Review:</label><br>
    <textarea id="review-text" rows="4" cols="50"></textarea><br>
    <label for="rating">Rating (1-5):</label>
    <input type="number" id="rating" min="1" max="5"><br>
    <button type="submit">Submit</button>
  </form>

  <script>
  // Get album from URL
  const params = new URLSearchParams(window.location.search);
  const album = params.get('album');

  document.getElementById('album-title').textContent = album;
  document.getElementById('album-cover').src = `album covers/${album}.jpg`;

  const form = document.getElementById('review-form');
  const reviewList = document.getElementById('review-list');

  // Load existing reviews from localStorage
  const storedReviews = JSON.parse(localStorage.getItem(`reviews-${album}`)) || [];

  storedReviews.forEach(review => {
    const li = document.createElement('li');
    li.textContent = `⭐ ${review.rating}/5 - ${review.text}`;
    reviewList.appendChild(li);
  });

  // Handle new review submission
  form.addEventListener('submit', function(event) {
    event.preventDefault();
    const text = document.getElementById('review-text').value.trim();
    const rating = document.getElementById('rating').value.trim();

    if (!text || !rating) {
      alert("Please enter both review and rating!");
      return;
    }

    const newReview = { text, rating };

    // Save to localStorage
    storedReviews.push(newReview);
    localStorage.setItem(`reviews-${album}`, JSON.stringify(storedReviews));

    // Update UI
    const li = document.createElement('li');
    li.textContent = `⭐ ${rating}/5 - ${text}`;
    reviewList.appendChild(li);

    form.reset();
  });
</script>

</body>
</html>
